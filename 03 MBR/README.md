# 解说
一些可能是计算机组成原理的知识。首先要知道电脑所有的元件都只是电路，精巧的电路，极其精巧的电路。抽象掉物理构造之后实现了一定的逻辑功能。
![](jixiang.jpg) 
## cpu
![](cpu.png) 
![](zhuban.png) 
cpu的内部有ALU，可以加减乘除，可以与或非，通过构造电路，把输入的电信号变成对应的电信号，逻辑上就完成了四则运算。

cpu有一堆针脚(pin)，插在主板上对各种硬件发号施令。某几根针脚发出有电了，厂商规定这几根针脚应该解释为地址，于是下面的设备就认为cpu的地址总线发出了一个信号。cpu概念上有地址总线，控制总线和数据总线。比如要把xx位置的内存写成yy数据这个命令， "xx位置"，"写"，"yy数据"就分别从对应总线里发出。

cpu有若干寄存器，用来暂存一些数据，每个都有这样那样的固定功能。其中值得一提的是cs:ip两个寄存器。cpu的一般工作流程是：
1. 从cs:ip转换出一个内存地址，从那里读取一条二进制的指令
2. ip指向下一条指令
3. 执行
很巧妙的一点是2 和3 的顺序，有的指令是跳转指令，会修改cs:ip的值，这个顺序保证了跳转指令有可能实现，2和3反过来的话跳转修改的cs:ip就会被步骤2覆盖掉。

##主板
cpu经常会发出类似指令:读取xx地址的数据，或者把yy数据写入xx地址。这里问题来了，xx地址在哪里？一个寻址问题。
答案主板知道，cpu发出xx地址之后，接手的是主板，上面有南桥北桥各种总线各种接口。
一个地址不一定对应到内存，也可能是各种外设，显卡硬盘USB。cpu把指令发给主板，主板拿到指令看到地址，给你转发到需要的硬件上。
主板怎么知道硬件的地址？插在自己身上能不知道吗，主板上的插槽位置都是固定的。

## 启动过程
机器通电之后，各个硬件都有电了开始待命，其中的主角是cpu。cpu加电之后的一步初始化是 **cs:ip=f000:fff0**，这个位置主板认为是自己的ROM上的，从这个位置读到的数据对应的汇编指令是**jmp far f000:e05b**。

# 工具
nasm 直接用包管理装。

dd 应该是系统自带的

# 原料
在02 Boot里

	nasm -o mbr.bin mbr.S
	
	dd if=mbr.bin of=../bin/hd60M.img bs=512 count=1 conv=notrunc
